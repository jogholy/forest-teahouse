# 🎯 MVP核心功能分析与验证方案

## 一、设计文档深度分析

### 1.1 完整功能清单（按系统分类）

**系统1：食材收集系统**
- Gacha抽卡机制（4个稀有度）
- 保底机制（10次/50次）
- 暴击与连击
- 天气加成
- 好友互助采集

**系统2：配方研发系统**
- 试茶台实验（2-4种食材组合）
- 配方提示系统（风味标签）
- 食谱星级与精通（1-5星）
- 多重解锁途径（6种）

**系统3：客人接待系统**
- 5个动物客人（不同性格/偏好）
- 故事收集机制（3-5章节）
- 好感度系统
- 告别与重逢机制

**系统4：社交系统**
- 茶会邀请卡（异步）
- 茶评系统
- 食材互赠
- 双人茶会（同步）

**系统5：成长系统**
- 茶屋升级（5个等级）
- 装饰系统
- 四季系统
- 季节活动

**系统6：付费系统**
- 通行证
- 加速道具
- 装饰商店
- 食材礼包

---

## 二、用户留存关键因素分析

### 2.1 治愈系游戏的留存核心

参考《旅行青蛙》《动物餐厅》《喵喵茶餐厅》的成功经验：

| 留存因素 | 重要性 | 在本设计中的体现 |
|---------|-------|----------------|
| **情感连接** | ⭐⭐⭐⭐⭐ | 客人故事收集、告别与重逢 |
| **即时反馈** | ⭐⭐⭐⭐⭐ | Gacha抽卡、泡茶动画、客人反应 |
| **收集养成** | ⭐⭐⭐⭐ | 食材收集、配方解锁、故事收集 |
| **探索惊喜** | ⭐⭐⭐⭐ | 配方实验、稀有食材、隐藏剧情 |
| **社交互动** | ⭐⭐⭐ | 茶会邀请、茶评系统 |
| **视觉治愈** | ⭐⭐⭐⭐⭐ | 手绘风格、泡茶仪式感 |

### 2.2 功能复杂度 vs 吸引力矩阵

```
高吸引力
    ↑
    │  [客人故事]     [配方实验]
    │      ●              ●
    │                          [Gacha抽卡]
    │                              ●
    │
    │  [四季系统]     [社交系统]
    │      ○              ○
    │
    │  [茶屋升级]     [付费系统]
    │      ○              ○
    │
    └──────────────────────────────→ 高复杂度
   低复杂度
```

**图例：**
- ● 高吸引力 + 适中复杂度 = MVP候选
- ○ 中等吸引力 / 高复杂度 = 后期迭代

---

## 三、MVP核心功能提取（3选1分析）

### 方案A：情感驱动型MVP

**核心功能：**
1. **客人故事系统**（情感连接核心）
2. **泡茶仪式系统**（视觉治愈核心）
3. **基础食材收集**（支撑玩法）

**验证目标：**
- 用户是否愿意为了看故事而重复泡茶？
- 泡茶动画是否足够治愈？
- 客人角色是否有吸引力？

**风险：**
- ❌ 故事内容质量要求极高（需要优秀文案）
- ❌ 如果故事不吸引人，整个MVP失败
- ❌ 缺少"惊喜感"（没有Gacha刺激）

---

### 方案B：探索驱动型MVP

**核心功能：**
1. **配方实验系统**（探索乐趣核心）
2. **Gacha食材收集**（即时反馈 + 惊喜）
3. **简化客人反馈**（验证配方成功）

**验证目标：**
- 用户是否享受试错配方的过程？
- Gacha机制是否足够上瘾？
- 配方解锁是否有成就感？

**风险：**
- ❌ 配方数量不足会导致快速玩腻
- ❌ 缺少情感连接，可能留存不足
- ⚠️ 需要精心设计配方提示系统（避免纯随机挫败）

---

### 方案C：混合驱动型MVP（推荐）⭐

**核心功能：**
1. **Gacha食材收集**（即时反馈 + 上瘾机制）
   - 4个稀有度（Common/Uncommon/Rare/Legendary）
   - 保底机制（10次必出Rare）
   - 点击采集 + 动画反馈
   
2. **配方实验系统**（探索乐趣 + 成就感）
   - 2-4种食材自由组合
   - 风味标签提示（降低挫败感）
   - 5个基础配方 + 2个隐藏配方
   
3. **客人故事片段**（情感连接 + 长期目标）
   - 2个初始客人（棉棉、咕咕）
   - 每个客人3个故事片段
   - 完美泡茶解锁故事

**验证目标：**
- ✅ Gacha是否让用户想"再来一次"？
- ✅ 配方实验是否有探索乐趣？
- ✅ 故事是否让用户想继续玩下去？
- ✅ 三者结合是否形成完整循环？

**优势：**
- ✅ 覆盖3种核心留存因素（即时反馈/探索/情感）
- ✅ 功能相互支撑，形成闭环
- ✅ 复杂度可控（2周可完成）
- ✅ 失败风险分散（不依赖单一功能）

---

## 四、MVP详细设计（方案C）

### 4.1 功能范围界定

#### 功能1：Gacha食材收集

**保留：**
- ✅ 4个稀有度等级
- ✅ 保底机制（10次必出Rare）
- ✅ 点击采集动画
- ✅ 8种基础食材

**砍掉：**
- ❌ 暴击/连击系统（复杂度高）
- ❌ 天气加成（需要天气系统）
- ❌ 好友互助（需要社交系统）
- ❌ 自动采集（挂机功能）

**实现重点：**
```typescript
// 核心数据结构
interface Ingredient {
  id: string;
  name: string;
  rarity: 'Common' | 'Uncommon' | 'Rare' | 'Legendary';
  flavors: ('清香' | '甘甜' | '苦涩' | '花香' | '果香')[];
  icon: string;
}

// 8种基础食材
const INGREDIENTS = [
  { id: '1', name: '晨露茶叶', rarity: 'Common', flavors: ['清香'] },
  { id: '2', name: '野蜂蜜', rarity: 'Common', flavors: ['甘甜'] },
  { id: '3', name: '月光白茶', rarity: 'Uncommon', flavors: ['清香', '花香'] },
  { id: '4', name: '琥珀蜂蜜', rarity: 'Uncommon', flavors: ['甘甜', '果香'] },
  { id: '5', name: '星屑普洱', rarity: 'Rare', flavors: ['苦涩', '清香'] },
  { id: '6', name: '冰晶薄荷', rarity: 'Rare', flavors: ['清香', '花香'] },
  { id: '7', name: '时之茶叶', rarity: 'Legendary', flavors: ['清香', '甘甜', '花香'] },
  { id: '8', name: '梦境花瓣', rarity: 'Legendary', flavors: ['花香', '果香'] }
];
```

---

#### 功能2：配方实验系统

**保留：**
- ✅ 2-4种食材组合
- ✅ 风味标签提示
- ✅ 成功/失败反馈
- ✅ 7个配方（5基础 + 2隐藏）

**砍掉：**
- ❌ 星级评价系统（简化为成功/失败）
- ❌ 精通度累积（后期功能）
- ❌ 多重解锁途径（只保留实验解锁）

**实现重点：**
```typescript
// 配方数据结构
interface Recipe {
  id: string;
  name: string;
  ingredients: string[]; // 食材ID数组
  flavorRequirement: string[]; // 必需风味
  description: string;
  unlocked: boolean;
}

// 7个配方
const RECIPES = [
  // 基础配方（明确告知）
  { id: 'r1', name: '清新绿茶', ingredients: ['1'], flavorRequirement: ['清香'] },
  { id: 'r2', name: '蜂蜜茶', ingredients: ['1', '2'], flavorRequirement: ['清香', '甘甜'] },
  { id: 'r3', name: '月光蜜茶', ingredients: ['3', '4'], flavorRequirement: ['清香', '甘甜', '花香'] },
  { id: 'r4', name: '薄荷清茶', ingredients: ['1', '6'], flavorRequirement: ['清香', '花香'] },
  { id: 'r5', name: '普洱蜜茶', ingredients: ['5', '2'], flavorRequirement: ['苦涩', '甘甜'] },
  
  // 隐藏配方（需要实验发现）
  { id: 'r6', name: '时光回忆', ingredients: ['7', '4'], flavorRequirement: ['清香', '甘甜', '花香'] },
  { id: 'r7', name: '梦境花茶', ingredients: ['8', '3'], flavorRequirement: ['花香', '清香'] }
];

// 配方匹配逻辑
function matchRecipe(selectedIngredients: Ingredient[]): Recipe | null {
  const flavors = new Set(selectedIngredients.flatMap(i => i.flavors));
  
  for (const recipe of RECIPES) {
    const hasAllFlavors = recipe.flavorRequirement.every(f => flavors.has(f));
    const hasAllIngredients = recipe.ingredients.every(id => 
      selectedIngredients.some(i => i.id === id)
    );
    
    if (hasAllFlavors && hasAllIngredients) {
      return recipe;
    }
  }
  
  return null; // 失败，做出"黑暗茶饮"
}
```

---

#### 功能3：客人故事片段

**保留：**
- ✅ 2个客人（棉棉、咕咕）
- ✅ 每个客人3个故事片段
- ✅ 完美泡茶解锁故事
- ✅ 客人偏好茶饮

**砍掉：**
- ❌ 好感度系统（简化为故事进度）
- ❌ 告别与重逢（后期功能）
- ❌ 传家宝奖励（后期功能）
- ❌ 客人出现条件（初始全部可见）

**实现重点：**
```typescript
// 客人数据结构
interface Guest {
  id: string;
  name: string;
  species: string;
  personality: string;
  favoriteRecipes: string[]; // 偏好配方ID
  stories: Story[];
}

interface Story {
  id: string;
  title: string;
  content: string;
  unlocked: boolean;
}

// 2个客人
const GUESTS = [
  {
    id: 'g1',
    name: '棉棉',
    species: '兔子记者',
    personality: '好奇、话多',
    favoriteRecipes: ['r1', 'r2'], // 偏好清新绿茶、蜂蜜茶
    stories: [
      { id: 's1', title: '初次见面', content: '你好呀！我是棉棉，一名森林记者...', unlocked: true },
      { id: 's2', title: '采访任务', content: '今天我要去采访森林深处的隐士...', unlocked: false },
      { id: 's3', title: '真相大白', content: '原来那位隐士就是...', unlocked: false }
    ]
  },
  {
    id: 'g2',
    name: '咕咕',
    species: '猫头鹰学者',
    personality: '沉稳、知性',
    favoriteRecipes: ['r4', 'r5'], // 偏好薄荷清茶、普洱蜜茶
    stories: [
      { id: 's4', title: '古老传说', content: '这片森林有一个古老的传说...', unlocked: true },
      { id: 's5', title: '失落的书页', content: '我在图书馆发现了一页残缺的古籍...', unlocked: false },
      { id: 's6', title: '森林的秘密', content: '原来这片森林的真相是...', unlocked: false }
    ]
  }
];

// 解锁逻辑
function serveGuest(guest: Guest, recipe: Recipe): boolean {
  const isFavorite = guest.favoriteRecipes.includes(recipe.id);
  
  if (isFavorite) {
    // 完美服务，解锁下一个故事
    const nextStory = guest.stories.find(s => !s.unlocked);
    if (nextStory) {
      nextStory.unlocked = true;
      return true; // 解锁成功
    }
  }
  
  return false; // 未解锁新故事
}
```

---

### 4.2 核心循环设计（5分钟闭环）

```
1. 采集食材（1分钟）
   - 点击3-5次采集
   - 获得随机食材
   - 可能出现Rare（惊喜感）
   ↓
2. 实验配方（2分钟）
   - 查看背包食材
   - 尝试2-3种组合
   - 成功/失败反馈
   - 可能解锁新配方（成就感）
   ↓
3. 接待客人（2分钟）
   - 客人到访（随机）
   - 泡茶动画（仪式感）
   - 客人反应（满意/一般）
   - 可能解锁故事（情感连接）
   ↓
4. 查看进度（30秒）
   - 配方收集进度（5/7）
   - 故事收集进度（2/6）
   - 食材稀有度统计
   ↓
回到步骤1（想要更多稀有食材/解锁剩余配方/看完所有故事）
```

---

### 4.3 MVP验证指标

**关键指标（必须达标）：**

| 指标 | 目标值 | 验证方法 |
|-----|-------|---------|
| **首次游玩时长** | >5分钟 | 埋点统计 |
| **完成一次完整循环率** | >80% | 漏斗分析 |
| **次日留存率** | >30% | 用户回访统计 |
| **配方解锁率** | >60%用户解锁3个以上 | 进度统计 |
| **故事阅读率** | >50%用户看完1个故事 | 行为统计 |

**辅助指标（参考）：**
- 平均采集次数：>10次/session
- 配方实验次数：>5次/session
- 客人接待次数：>3次/session
- 用户反馈NPS：>7分

**失败判定标准：**
- ❌ 首次游玩时长 <3分钟 → 核心循环不吸引人
- ❌ 次日留存率 <20% → 缺少长期目标
- ❌ 配方解锁率 <40% → 难度过高或提示不足
- ❌ 故事阅读率 <30% → 故事内容不吸引人

---

## 五、MVP开发计划（2周冲刺）

### Week 1: 核心系统实现

**Day 1-2: 基础架构 + Gacha系统**
- [ ] 项目脚手架（Vite + Phaser + TypeScript）
- [ ] 领域模型（Ingredient/Recipe/Guest）
- [ ] GachaEngine实现 + 单元测试
- [ ] 采集场景UI（占位符美术）

**Day 3-4: 配方实验系统**
- [ ] RecipeMatcher逻辑 + 单元测试
- [ ] 试茶台UI（拖拽交互）
- [ ] 成功/失败反馈动画
- [ ] 配方图鉴UI

**Day 5: 客人故事系统**
- [ ] Guest数据模型
- [ ] 故事解锁逻辑 + 单元测试
- [ ] 客人对话UI
- [ ] 故事展示UI

### Week 2: 整合 + 打磨

**Day 6-7: 核心循环整合**
- [ ] 场景切换流程
- [ ] 数据持久化（LocalStorage）
- [ ] 完整流程E2E测试

**Day 8-9: 美术替换 + 动画**
- [ ] 手绘风格UI（简化版）
- [ ] 泡茶动画（5步骤）
- [ ] 采集特效
- [ ] 客人立绘（简笔画）

**Day 10: 测试 + 部署**
- [ ] Bug修复
- [ ] 性能优化
- [ ] 部署到测试环境
- [ ] 准备用户测试

---

## 六、用户测试方案

### 6.1 测试对象

**目标用户画像：**
- 年龄：18-35岁
- 性别：女性为主（70%）
- 偏好：治愈系游戏、收集养成、轻度玩家
- 参考游戏：旅行青蛙、动物餐厅、江南百景图

**测试规模：**
- 第一轮：10人（深度访谈）
- 第二轮：50人（数据收集）

### 6.2 测试流程

**第一轮（定性）：**
1. 无引导游玩5分钟
2. 观察用户行为（录屏）
3. 深度访谈（30分钟）
   - 哪个环节最吸引你？
   - 哪个环节最困惑？
   - 是否想继续玩下去？为什么？
   - 如果收费，愿意付多少？

**第二轮（定量）：**
1. 发放测试链接
2. 埋点收集数据（3天）
3. 问卷调查（NPS + 开放问题）

### 6.3 决策标准

**继续开发条件（满足2/3即可）：**
- ✅ 次日留存率 >30%
- ✅ NPS >7分
- ✅ 用户主动询问"什么时候正式上线"

**放弃项目条件（满足任意1条）：**
- ❌ 次日留存率 <20%
- ❌ 用户普遍反馈"玩不下去"
- ❌ 核心循环无法在2周内修复

---

## 七、总结

### 7.1 为什么选择这3个功能？

**Gacha食材收集：**
- ✅ 即时反馈强，上瘾机制成熟
- ✅ 实现简单，风险低
- ✅ 为配方系统提供素材

**配方实验系统：**
- ✅ 探索乐趣，有深度
- ✅ 成就感强（解锁新配方）
- ✅ 可扩展性好（后期加配方即可）

**客人故事片段：**
- ✅ 情感连接，长期目标
- ✅ 验证故事内容质量
- ✅ 为后续社交系统打基础

### 7.2 砍掉的功能为什么不在MVP？

**社交系统：**
- 需要服务端支持（复杂度高）
- 需要用户基数（冷启动困难）
- 可以后期加入

**茶屋升级/装饰：**
- 纯数值成长，缺少情感连接
- 需要大量美术资产
- 不是核心吸引力

**四季系统：**
- 需要4套美术资产
- 实现复杂度高
- 可以用单一季节（春天）验证

### 7.3 下一步行动

**立即执行：**
1. [ ] 确认MVP功能范围（本文档）
2. [ ] 准备故事文案（6个故事片段）
3. [ ] 准备占位符美术（简笔画即可）
4. [ ] 开始编码（Day 1）

**2周后决策点：**
- 如果验证通过 → 进入Alpha开发（补充完整内容）
- 如果验证失败 → 分析原因，决定是否pivot或放弃

---

**这个MVP方案能用最小成本验证核心假设：用户是否喜欢这个游戏的核心体验？**